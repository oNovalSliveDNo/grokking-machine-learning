# chapter04/utils/reporting.py


def format_polynomial_equation(weights, precision=2):
    """
    Форматирует уравнение полинома по заданным весам.

    Параметры:
    weights (list): Список коэффициентов полинома, где индекс элемента
                    соответствует степени переменной x.
    precision (int): Количество знаков после запятой для округления коэффициентов.

    Возвращает:
    str: Строка, представляющая полиномиальное уравнение в формате:
         y = w0 + (w1 * x^1) + (w2 * x^2) + ... + (wn * x^n)
    """

    # Создаем список для хранения форматированных термов полинома
    terms = []

    # Перебираем все коэффициенты вместе с их индексами
    for i, w in enumerate(weights):
        # Округляем коэффициент до указанной точности
        rounded_w = round(w, precision)

        # Форматируем терм в зависимости от степени x:
        if i == 0:
            # Свободный член (x^0) выводим без указания переменной
            term = f"{rounded_w}"
        else:
            # Для остальных коэффициентов создаем терм вида (w * x^i)
            term = f"({rounded_w} * x^{i})"

        # Добавляем отформатированный терм в список
        terms.append(term)

    # Объединяем все термы через ' + ' и добавляем префикс 'y = '
    return "y = " + " + ".join(terms)
